<div class="container">
  <h2>Update Booking</h2>
  @if(bookingStore.successMessage()) {
  <p class="success">{{ bookingStore.successMessage() }}</p>
  } @if(bookingStore.error()) {
  <p class="success">{{ bookingStore.error() }}</p>
  } @if (bookingStore.isLoading()) {
  <p>Loading booking details...</p>
  }@else {

  <div class="details">
    <h3>Booking Details</h3>
    <p>
      <strong>Confirmation Code:</strong>
      {{ bookingStore.currentBookingByReference()?.bookingReference }}
    </p>
    <p>
      <strong>Check-in Date:</strong>
      {{ bookingStore.currentBookingByReference()?.checkedInDate }}
    </p>
    <p>
      <strong>Check-out Date:</strong>
      {{ bookingStore.currentBookingByReference()?.checkedOutDate }}
    </p>
    <p>
      <strong>Total Price:</strong>
      {{ bookingStore.currentBookingByReference()?.totalPrice }}
    </p>
    <p>
      <strong>Payment Status:</strong>
      {{ bookingStore.currentBookingByReference()?.paymentStatus }}
    </p>
    <p>
      <strong>Booking Status:</strong>
      {{ bookingStore.currentBookingByReference()?.bookingStatus }}
    </p>

    <br />
    <hr />
    <br />
    <h3>Who Made The Booking</h3>
    <p>
      <strong>First Name:</strong>
      {{ bookingStore.currentBookingByReference()?.user?.firstname }}
    </p>
    <p>
      <strong>Last Name:</strong>
      {{ bookingStore.currentBookingByReference()?.user?.lastname }}
    </p>
    <p>
      <strong>Email:</strong>
      {{ bookingStore.currentBookingByReference()?.user?.email }}
    </p>
    <p>
      <strong>Phone Number:</strong>
      {{ bookingStore.currentBookingByReference()?.user?.phoneNumber }}
    </p>

    <br />
    <hr />
    <br />
    <h3>Room Details</h3>
    <p>
      <strong>Type:</strong>
      {{ bookingStore.currentBookingByReference()?.room?.roomType }}
    </p>
    <p>
      <strong>Price per Night:</strong>
      {{
        bookingStore.currentBookingByReference()?.room?.pricePerNight | currency
      }}
    </p>
    <p>
      <strong>Capacity:</strong>
      {{ bookingStore.currentBookingByReference()?.room?.capacity }}
    </p>
    <p>
      <strong>Description:</strong>
      {{ bookingStore.currentBookingByReference()?.room?.description }}
    </p>
    <img
      [src]="
        'assets/rooms/' +
        bookingStore.currentBookingByReference()?.room?.imageUrl
      "
      alt="Room Image"
      height="200"
    />
  </div>
  <hr />
  <h3>Update Status</h3>
  <form [formGroup]="form" (ngSubmit)="onHandleUpdate()">
    <div class="form-group">
      <label for="bookingStatus">Booking Status</label>
      <select id="bookingStatus" formControlName="bookingStatus">
        <option value="">Select</option>
        <option value="BOOKED">BOOKED</option>
        <option value="CANCELLED">CANCELLED</option>
        <option value="CHECKED_IN">CHECKED IN</option>
        <option value="CHECKED_OUT">CHECKED OUT</option>
      </select>
    </div>

    <div class="form-group">
      <label for="paymentStatus">Payment Status</label>
      <select id="paymentStatus" formControlName="paymentStatus">
        <option value="">Select</option>
        <option value="PENDING">PENDING</option>
        <option value="COMPLETED">COMPLETED</option>
        <option value="FAILED">FAILED</option>
        <option value="REFUNDED">REFUNDED</option>
        <option value="REVERSED">REVERSED</option>
      </select>
    </div>
    <button type="submit">Update Booking</button>
  </form>
  }
</div>
